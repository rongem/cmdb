<app-help>
    <p i18n="attributes are text information stored along with a configuration item. Every attribute needs a distinct attribute type.">
        Attribute sind Textinformationen, die zu einem Configuration Item gespeichert werden.
        Jedes Attribut besitzt einen eindeutigen Attribut-Typen.
    </p>
    <p i18n="attributes groups integrate one ore more attribute types, and are mapped to item types.">
        Attribut-Typen werden in Attributgruppen zusammengefasst. Attributgruppen werden dann Item-Typen zugeordnet.
    </p>
    <p i18n="attribute groups can be deleted if they are no longer mapped to an item type and don't contain any attribute types.">
        Attributgruppen k&ouml;nnen gel&ouml;scht werden, wenn sie keinem 
        Item-Typen mehr zugeordnet sind
        und keine Attribut-Typen mehr enthalten.
    </p>
</app-help>
<table class="box">
    <thead>
        <tr>
            <th class="table-cell table-header" i18n="attribute group name">Name der Attributgruppe</th>
            <th class="table-cell table-header" i18n="number and names of mapped attribute types">Anzahl und Namen der zugeordnete Attributtypen</th>
            <th class="table-cell table-header" i18n="commands">Aktionen</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let attributeGroup of (attributeGroups | async)">
            <td class="table-cell">
                <div class="input-display__elements" *ngIf="activeGroup!==attributeGroup.id">
                    <button class="input-display__content-button selectable" type="button" (click)="onSetGroup(attributeGroup)"
                        matTooltip="Name der Attributgruppe &auml;ndern" i18n-matTooltip="change name of attribute group">
                        {{ attributeGroup.name }}
                        <span class="visually-hidden" i18n="click here to edit name of the attribute group">
                            Zum Bearbeiten des Namens der Attributgruppe anklicken
                        </span>
                    </button>
                </div>
                <app-text-input *ngIf="activeGroup === attributeGroup.id"
                    [originalText]="attributeGroup.name"
                    [minimumLength]="4"
                    (accept)="onChangeAttributeGroupName($event, attributeGroup)"
                    (cancel)="onCancel()">
                </app-text-input>
            </td>
            <td class="table-cell">
                <b>
                    {{ (getAttributeTypesOfGroup(attributeGroup.id) | async).length }}
                </b>
                ({{(getAttributeTypeNamesOfGroup(attributeGroup.id) | async)}})
            </td>
            <td class="table-cell">
                <button type="button" class="selectable flex-horizontal__align-middle no-wrap"
                    [cdkCopyToClipboard]="attributeGroup.id"
                    matTooltip="Id in die Zwischenablage kopieren"
                    i18n-matTooltip="copy id to clipboard">
                    <span class="material-icons">shop_two</span>
                    <span>Id kopieren</span>
                    <span class="visually-hidden" i18n="click to copy the attribute group id into the clipbaord">
                        Klicken, um die Id der Attributgruppe in die Zwischenablage zu kopieren
                    </span>
                </button>
                <button type="button" class="selectable flex-horizontal__align-middle no-wrap"
                    matTooltip="Zuordnung von Item-Typen verwalten"
                    i18-matTooltip="manage mappings of item types"
                    [routerLink]="['..', 'attribute-group', attributeGroup.id]">
                    <span class="material-icons">event_note</span>
                    <span>Zuordnungen</span>
                    <span class="visually-hidden" i18n="click to manage mappings between the attribute group and item types">
                        Klicken, um die Zuordnung der Attributgruppe zu Item-Typen zu verwalten
                    </span>
                </button>
                <button type="button" class="red-button selectable"
                    (click)="onDeleteAttributeGroup(attributeGroup)"
                    matTooltip="Attributgruppe l&ouml;schen"
                    i18n-matTooltip="delete attribute group"
                    *ngIf="(getAttributeTypesOfGroup(attributeGroup.id) | async).length === 0 && (getAttributeMappingsOfGroup(attributeGroup.id) | async) === 0">
                    <span class="material-icons">delete_forever</span>
               </button>
            </td>
        </tr>
        <tr>
            <td class="table-cell" colspan="3">
                <button type="button" (click)="onCreate()" *ngIf="!createMode" class="selectable">
                    <span class="material-icons">add_box</span>
                </button>
                <app-text-input *ngIf="createMode"
                    [minimumLength]="4"
                    (accept)="onCreateAttributeGroup($event)"
                    (cancel)="onCancel()">
                </app-text-input>
            </td>
        </tr>
    </tbody>
</table>
