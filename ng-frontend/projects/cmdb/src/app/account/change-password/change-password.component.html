<main class="page-layout">
    <h2 i18n="change password">Kennwort &auml;ndern</h2>
    <form [formGroup]="userForm">
        <div *ngIf="changeOwn">
            <mat-form-field>
                <mat-label i18n="current password">Bisheriges Kennwort</mat-label>
                <input type="password" formControlName="oldpassword" matInput required class="selectable"
                    placeholder="Bisheriges Kennwort" i18n-placeholder="current password"/>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <mat-label i18n="new password">Neues Kennwort</mat-label>
                <input type="password" formControlName="password" autocomplete="new-password" matInput required
                    class="selectable" placeholder="Kennwort" i18n-placeholder="password"/>
            </mat-form-field>
        </div>
        <div>
            <mat-form-field>
                <input type="password" formControlName="passwordRepeat" matInput required class="selectable"
                    placeholder="Kennwort wiederholen" i18n-placeholder="repeat password"/>
            </mat-form-field>
        </div>
    </form>
    <div *ngIf="error" class="error" [ngSwitch]="error">
        <p *ngSwitchCase="'Server validation error'" i18n="server validation error">
            Der Server hat Fehler bei der Validierung der Regeln festgestellt.
        </p>
        <p *ngSwitchDefault>
            {{error}}
        </p>
        <ul *ngIf="errorDetails">
            <li *ngFor="let detail of errorDetails" [ngSwitch]="detail">
                <ng-container *ngSwitchCase="'passphrase: Invalid value'" i18n="password does not meet complexity criteria">
                    Das Kennwort entspricht nicht den Komplexit√§tskriterien.
                </ng-container>
                <ng-container *ngSwitchDefault>
                    {{detail}}
                </ng-container>
            </li>
        </ul>
    </div>
    <div>
        <button mat-button (click)="updatePassword()" [disabled]="userForm.invalid" i18n="change password" class="selectable">Kennwort &auml;ndern</button>
        <button mat-button mat-dialog-close i18n="close" class="selectable">Beenden</button>
    </div>
</main>
