<ng-container
  *ngIf="!(displayStore | async).result.resultListFullPresent">
  <p i18n="loading data, please wait">Lade weitere Daten nach, bitte warten Sie einen Moment...<mat-spinner></mat-spinner></p>
  <table mat-table [dataSource]="(displayStore | async).result.resultList"
    class="mat-elevation-z8">
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef i18n="item type">
        Item-Typ
      </th>
      <td mat-cell *matCellDef="let ci">{{ ci.TypeName }}</td>
    </ng-container>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef i18n="item name">Item-Name</th>
      <td mat-cell *matCellDef="let ci">
        <a [routerLink]="['/display', 'configuration-item', ci.ItemId ]">
          {{ ci.ItemName }}
        </a>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</ng-container>

<ng-container *ngIf="(displayStore | async).result.resultListFullPresent">
  <table mat-table [dataSource]="(displayStore | async).result.resultListFull"
    class="mat-elevation-z8">
    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef i18n="item type">
        Item-Typ
        <button mat-icon-button type="button" *ngIf="(getResultsItemTypes() | async).length > 1"
          [matMenuTriggerFor]="filterItemTypeMenu">
          <span class="material-icons">filter_list</span>
        </button>
      </th>
      <td mat-cell *matCellDef="let ci">{{ ci.type }}</td>
    </ng-container>
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef i18n="item name">Item-Name</th>
      <td mat-cell *matCellDef="let ci">
        <a [routerLink]="['/display', 'configuration-item', ci.id ]">
          {{ ci.name }}
        </a>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
  
  <mat-menu #filterItemTypeMenu="matMenu">
    <button mat-menu-item type="button"
      *ngFor="let itemType of (getResultsItemTypes() | async)"
      (click)="filterResultsByItemType(itemType)">
      {{ itemType.TypeName }}
    </button>
  </mat-menu>
</ng-container>

<p *ngFor="let key of ((getResultsColumns() | async) | keyvalue)">{{(getResultsColumns() | async)[key]}}</p>