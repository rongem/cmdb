<app-busy *ngIf="!(configItemState | async).itemReady" i18n="loading data">
    Lade Daten...
</app-busy>
<div class="container" *ngIf="(configItemState | async).itemReady">
    <app-item-menu></app-item-menu>
    <div class="edit-grid">
        <div class="label" i18n="item type">Item-Typ</div>
        <div class="content" [style.background]="(configurationItem | async).color">
            <span class="text-on-background">{{(configurationItem | async).type}}</span>
        </div>
        <div class="label" i18n="item name">Name</div>
        <div *ngIf="(configurationItem | async).userIsResponsible">
            <button mat-button class="input-display__content-button" type="button"
                (click)="editName = true" *ngIf="!editName"
                matTooltip="Name des Configuration Item &auml;ndern"
                i18n-matTooltip="change name of configuration item">
                {{(configurationItem | async).name}}
            </button>
            <app-text-input *ngIf="editName"
                [originalText]="(configurationItem | async).name"
                [minimumLength]="2"
                (accept)="onChangeItemName($event)"
                (cancel)="editName = false">
            </app-text-input>
        </div>
        <div *ngIf="!(configurationItem | async).userIsResponsible">
            <span>{{(configurationItem | async).name}}</span>&nbsp;
            <button mat-button class="input-display__content-button" type="button"
                (click)="onTakeResponsibility()"
                matTooltip="Sie k&ouml;nnen nur Items bearbeiten, f&uuml;r die Sie die Verantwortung besitzen"
                i18n-matTooltip="you are only allowed to edit items that you are responsible for"
                i18n="take responsibility configuration item">
                Verantwortung f√ºr das Configuration Item &uuml;bernehmen
            </button>
        </div>
        <div class="label" i18n="last change">Zuletzt ge&auml;ndert</div>
        <div class="content">{{((configurationItem | async).lastChange) | date:'dd.MM.yyyy HH:mm:ss'}}</div>
        <div class="label" i18n="version">Version</div>
        <div class="content">{{(configurationItem | async).version}}</div>
    </div>
    <hr />
    
    <div *ngIf="(configurationItem | async).userIsResponsible">
        <nav mat-tab-nav-bar>
            <a mat-tab-link [routerLink]="['.']" fragment="attributes"
                i18n="attributes" [active]="activeTab === 'attributes'"
                *ngIf="(attributeTypes | async).length > 0 || (attributes | async).length > 0">
                Attribute
            </a>
            <a mat-tab-link [routerLink]="['.']" fragment="connections"
                i18n="connections" [active]="activeTab === 'connections'"
                *ngIf="(connectionTypes | async).length > 0">
                Verbindungen
            </a>
            <a mat-tab-link [routerLink]="['.']" fragment="links"
                i18n="external links" [active]="activeTab === 'links'">
                Links
            </a>
            <a mat-tab-link [routerLink]="['.']" fragment="responsibility"
                i18n="responsible persons" [active]="activeTab === 'responsibility'">
                Verantwortliche
            </a>
        </nav>
        <app-edit-item-attributes *ngIf="activeTab === 'attributes'"></app-edit-item-attributes> 
        <app-edit-item-connections *ngIf="activeTab === 'connections'"></app-edit-item-connections>
        <app-edit-item-links *ngIf="activeTab === 'links'"></app-edit-item-links> 
        <app-edit-item-responsibilities *ngIf="activeTab === 'responsibility'"></app-edit-item-responsibilities> 
    </div>
</div>
